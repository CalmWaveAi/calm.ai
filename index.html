<!DOCTYPE html>
<html>
<head>
  <title>Lets take a break</title>
  <meta name="description" content="AI-generated calming sound to reduce stress and anxiety">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    body {
      font-family: Sondra, sans-serif;
      background: #fffff0;
      text-align: center;
      padding: 30px;
    }
    textarea {
      width: 55%;
      height: 120px;
      font-size: 16px;
      padding: 10px;
    }
    button {
      margin-top: 15px;
      padding: 15px 25px;
      font-size: 24px;
      border: none;
      border-radius: 8px;
      background: #fff8dc;
      color: black;
      cursor: pointer;
    }
    button:hover {
      background: #45a8a8;
    }
    p {
      margin-top: 20px;
      font-size: 16px;
    }
  </style>
</head>

<!-- PayPal Buy Now Button -->
<form action="https://www.paypal.com/cgi-bin/webscr" method="post" target="_blank">
  <input type="hidden" name="cmd" value="_xclick">
  <input type="hidden" name="business" value="YOUR_PAYPAL_ACCOUNT">
  <input type="hidden" name="item_name" value="Calm AI Premium">
  <input type="hidden" name="amount" value="5.00">
  <input type="hidden" name="currency_code" value="USD">
  <input type="submit" value="Unlock Premium Calm AI" style="padding:15px 25px; font-size:18px; border:none; border-radius:8px; background:#fff8dc; color:black; cursor:pointer;">
</form>

<body>
<h1>Lets take a break</h1>
<p>Express yourself, let it all out.</p>

<textarea id="feelings" placeholder="I feel anxious, stressed, overwhelmed..."></textarea>
<br>
<button onclick="startCalm()">Calm Me Down</button>
<button onclick="stopCalm()">Stop</button>

<p id="status"></p>

<script>
let audioCtx;
let birdInterval;
let speaking = false;

function startCalm() {
  if (speaking) return;
  speaking = true;

  const text = document.getElementById("feelings").value.toLowerCase();
  const status = document.getElementById("status");
  status.innerText = "The AI is gently telling you a calming story ðŸŒ¿";

  // ðŸŒ¿ Generate calming story
  let story = "Take a slow breath. Imagine you are walking through a quiet forest. ";

  if (text.includes("anxious") || text.includes("panic")) {
    story += "The air feels safe and steady. Each step slows your thoughts, and your breathing becomes calm and even. ";
  } else if (text.includes("sad")) {
    story += "Soft light filters through the trees, reminding you that peace is still close to you. ";
  } else if (text.includes("sleep") || text.includes("tired")) {
    story += "The ground beneath you is warm and comfortable, inviting your body to rest. ";
  } else {
    story += "Everything around you moves gently, without pressure or expectation. ";
  }

  story += "You are safe. You are allowed to rest.";

  // ðŸ—£ï¸ AI Voice (Browser Speech)
  const utterance = new SpeechSynthesisUtterance(story);
  utterance.rate = 0.75;   // slow
  utterance.pitch = 0.9;   // soft
  utterance.volume = 1;

  speechSynthesis.speak(utterance);

  // ðŸ¦ Bird sounds (procedural)
  audioCtx = new (window.AudioContext || window.webkitAudioContext)();

  birdInterval = setInterval(() => {
    const osc = audioCtx.createOscillator();
    const gain = audioCtx.createGain();

    osc.type = "sine";
    osc.frequency.value = 1000 + Math.random() * 800;
    gain.gain.value = 0.02;

    osc.connect(gain).connect(audioCtx.destination);
    osc.start();
    osc.stop(audioCtx.currentTime + 0.15);
  }, 4000 + Math.random() * 3000); // random chirps
}

function stopCalm() {
  speechSynthesis.cancel();
  clearInterval(birdInterval);
  if (audioCtx) audioCtx.close();
  speaking = false;
  document.getElementById("status").innerText = "Session ended ðŸŒ™";
}
</script>

 } catch (e) {
    status.innerText = "Sorry, your browser does not support audio generation.";
    console.error(e);
  }
}

function stopCalm() {
  const status = document.getElementById("status");
  if (oscillators.length > 0) {
    oscillators.forEach(o => {
      try { o.stop(); } catch(e){}
    });
    oscillators = [];
  }
  if (audioCtx) {
    try { audioCtx.close(); } catch(e){}
  }
  status.innerText = "Session stopped ðŸŒ™ You did great!";
  isPlaying = false;
}
</script>

</body>
</html>

