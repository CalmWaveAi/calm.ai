<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Pure Calm Generator</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
body {
  margin:0;
  height:100vh;
  display:flex;
  justify-content:center;
  align-items:center;
  background:#0e1a17;
  color:#e7f5f2;
  font-family:system-ui,-apple-system,Segoe UI,sans-serif;
}
.app {
  width:90%;
  max-width:800px;
  padding:40px;
  border-radius:28px;
  background:rgba(255,255,255,0.07);
  backdrop-filter:blur(20px);
  text-align:center;
}
button {
  margin-top:30px;
  padding:18px 40px;
  border-radius:999px;
  border:none;
  background:#6fd3c4;
  font-size:18px;
  color:#06332c;
  cursor:pointer;
}
.status {
  margin-top:20px;
  font-size:14px;
  color:#a8cfc7;
}
.orb {
  width:160px;
  height:160px;
  margin:0 auto 30px;
  border-radius:50%;
  background:radial-gradient(circle at top,#b7fff3,#49bfb0);
  animation:float 12s ease-in-out infinite;
  box-shadow:0 0 90px rgba(111,211,196,.6);
}
@keyframes float {
  0% { transform:translateY(0) scale(1); }
  50% { transform:translateY(-18px) scale(1.03); }
  100% { transform:translateY(0) scale(1); }
}
</style>
</head>
<body>

<div class="app">
  <div class="orb"></div>
  <h1>Pure Calm</h1>
  <p>No voice. No words. Just presence.</p>
  <button id="start">Start Session</button>
  <div class="status" id="status"></div>
</div>

<script>
let ctx;
let layers = [];

document.getElementById("start").onclick = () => {
  if (ctx) ctx.close();
  ctx = new (window.AudioContext || window.webkitAudioContext)();
  layers = [];

  generatePads();
  generateAir();
  generateSwells();

  status.innerText = "A new calm session is unfoldingâ€¦";
};

/* -------- PAD LAYERS -------- */
function generatePads() {
  const base = 90 + Math.random() * 40;

  for (let i = 0; i < 3; i++) {
    const osc = ctx.createOscillator();
    osc.type = "sine";
    osc.frequency.value = base * (1 + i * 0.15 + Math.random() * 0.05);

    const gain = ctx.createGain();
    gain.gain.value = 0.015 + Math.random() * 0.01;

    osc.connect(gain).connect(ctx.destination);
    osc.start();

    layers.push(osc);
  }
}

/* -------- AIR / NATURE TEXTURE -------- */
function generateAir() {
  const buffer = ctx.createBuffer(1, ctx.sampleRate * 2, ctx.sampleRate);
  const data = buffer.getChannelData(0);

  for (let i = 0; i < data.length; i++) {
    data[i] = (Math.random() * 2 - 1) * 0.03;
  }

  const noise = ctx.createBufferSource();
  noise.buffer = buffer;
  noise.loop = true;

  const filter = ctx.createBiquadFilter();
  filter.type = "lowpass";
  filter.frequency.value = 700 + Math.random() * 300;

  const gain = ctx.createGain();
  gain.gain.value = 0.02;

  noise.connect(filter).connect(gain).connect(ctx.destination);
  noise.start();
}

/* -------- BREATH-LIKE SWELLS -------- */
function generateSwells() {
  setInterval(() => {
    const osc = ctx.createOscillator();
    osc.type = "sine";
    osc.frequency.value = 120 + Math.random() * 40;

    const gain = ctx.createGain();
    gain.gain.setValueAtTime(0, ctx.currentTime);
    gain.gain.linearRampToValueAtTime(0.04, ctx.currentTime + 3);
    gain.gain.linearRampToValueAtTime(0, ctx.currentTime + 8);

    osc.connect(gain).connect(ctx.destination);
    osc.start();
    osc.stop(ctx.currentTime + 8);
  }, 7000 + Math.random() * 4000);
}
</script>
</body>
</html>
