index.html

<!DOCTYPE html>
<html>
<head>
  <title>Calm AI</title>
  <meta name="description" content="AI-generated calming sound to reduce stress and anxiety">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #eaf6f6;
      text-align: center;
      padding: 30px;
    }
    textarea {
      width: 90%;
      height: 120px;
      font-size: 16px;
      padding: 10px;
    }
    button {
      margin-top: 15px;
      padding: 15px 25px;
      font-size: 18px;
      border: none;
      border-radius: 8px;
      background: #5abfbf;
      color: white;
      cursor: pointer;
    }
    button:hover {
      background: #45a8a8;
    }
    p {
      margin-top: 20px;
      font-size: 16px;
    }
  </style>
</head>

<body>
<h1>ðŸ§  Calm AI</h1>
<p>Tell me how youâ€™re feeling. Iâ€™ll generate a calming sound for you.</p>

<textarea id="feelings" placeholder="I feel anxious, stressed, overwhelmed..."></textarea>
<br>
<button onclick="startCalm()">Calm Me Down</button>
<button onclick="stopCalm()">Stop</button>

<p id="status"></p>

<script>
let audioCtx;
let masterGain;
let isPlaying = false;
let oscillators = [];

function startCalm() {
  if (isPlaying) return; // prevent multiple starts
  const text = document.getElementById("feelings").value.toLowerCase();
  const status = document.getElementById("status");
  status.innerText = "Calming AI sound is playing. Take slow breaths ðŸ’™";

  try {
    audioCtx = new (window.AudioContext || window.webkitAudioContext)();
    masterGain = audioCtx.createGain();
    masterGain.gain.value = 0.05; // soft volume
    masterGain.connect(audioCtx.destination);
    
    // Decide base frequency depending on mood
    let baseFreq = 80; // default
    if (text.includes("anxious") || text.includes("panic")) baseFreq = 60;
    if (text.includes("sad") || text.includes("depressed")) baseFreq = 70;
    if (text.includes("angry") || text.includes("frustrated")) baseFreq = 90;
    if (text.includes("tired") || text.includes("sleep")) baseFreq = 40;

    // Create multiple oscillators for a more natural sound
    for (let i = 0; i < 3; i++) {
      const osc = audioCtx.createOscillator();
      osc.type = "sine";
      osc.frequency.value = baseFreq + Math.random() * 10; // slight variation
      osc.connect(masterGain);
      osc.start();
      oscillators.push(osc);
    }

    // Create gentle noise for texture
    const bufferSize = 2 * audioCtx.sampleRate;
    const noiseBuffer = audioCtx.createBuffer(1, bufferSize, audioCtx.sampleRate);
    const output = noiseBuffer.getChannelData(0);
    for (let i = 0; i < bufferSize; i++) output[i] = (Math.random() * 2 - 1) * 0.02;
    const whiteNoise = audioCtx.createBufferSource();
    whiteNoise.buffer = noiseBuffer;
    whiteNoise.loop = true;
    whiteNoise.connect(masterGain);
    whiteNoise.start();
    oscillators.push(whiteNoise);

    // Stop after 1 hour automatically
    setTimeout(stopCalm, 3600000);
    isPlaying = true;

  } catch (e) {
    status.innerText = "Sorry, your browser does not support audio generation.";
    console.error(e);
  }
}

function stopCalm() {
  const status = document.getElementById("status");
  if (oscillators.length > 0) {
    oscillators.forEach(o => {
      try { o.stop(); } catch(e){}
    });
    oscillators = [];
  }
  if (audioCtx) {
    try { audioCtx.close(); } catch(e){}
  }
  status.innerText = "Session stopped ðŸŒ™ You did great!";
  isPlaying = false;
}
</script>

</body>
</html>

